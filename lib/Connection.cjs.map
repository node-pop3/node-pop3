{"version":3,"file":"Connection.cjs","names":["_net","require","_tls2","_interopRequireDefault","_events","_stream","_constant","e","__esModule","default","Pop3Connection","EventEmitter","constructor","host","port","tls","timeout","tlsOptions","servername","_socket","_command","_updateStream","Readable","read","_pushStream","buffer","TERMINATOR_BUFFER_ARRAY","some","_buffer","equals","_endStream","endBuffer","subarray","TERMINATOR_BUFFER","push","err","emit","connect","socket","Socket","setKeepAlive","Promise","resolve","reject","settled","safeResolve","safeReject","listeners","length","setTimeout","Error","eventName","destroyed","end","destroy","options","_tls","on","command","startsWith","firstLineEndIndex","indexOf","CRLF_BUFFER","infoBuffer","commandName","msgNumber","split","stream","MULTI_LINE_COMMAND_NAME","includes","MAYBE_MULTI_LINE_COMMAND_NAME","bodyBuffer","toString","once","args","join","trim","rejectFn","info","removeListener","write","CRLF","_default","exports","module"],"sources":["../src/Connection.js"],"sourcesContent":["import {Socket} from 'net';\r\nimport _tls from 'tls';\r\nimport {EventEmitter} from 'events';\r\nimport {Readable} from 'stream';\r\n\r\nimport {\r\n  CRLF,\r\n  CRLF_BUFFER,\r\n  TERMINATOR_BUFFER,\r\n  TERMINATOR_BUFFER_ARRAY,\r\n  MULTI_LINE_COMMAND_NAME,\r\n  MAYBE_MULTI_LINE_COMMAND_NAME\r\n} from './constant.js';\r\n\r\n/**\r\n * @typedef {number} Integer\r\n */\r\n\r\n/* eslint-disable unicorn/prefer-event-target -- Should replace for browser */\r\n/**\r\n *\r\n */\r\nclass Pop3Connection extends EventEmitter {\r\n  /* eslint-enable unicorn/prefer-event-target -- Should replace for browser */\r\n  /**\r\n   * @param {{\r\n  *   host: string,\r\n  *   port?: Integer,\r\n  *   tls?: boolean,\r\n  *   timeout?: Integer,\r\n  *   tlsOptions?: import('tls').TlsOptions,\r\n  *   servername?: string\r\n  * }} cfg\r\n  */\r\n  constructor ({\r\n    host,\r\n    port,\r\n    tls,\r\n    timeout,\r\n    tlsOptions,\r\n    servername\r\n  }) {\r\n    super();\r\n    this.host = host;\r\n    this.port = port || (tls ? 995 : 110);\r\n    this.tls = tls;\r\n    this.timeout = timeout;\r\n    this._socket = null;\r\n    this._stream = null;\r\n    this._command = '';\r\n    this.tlsOptions = tlsOptions || {};\r\n    this.servername = servername || host;\r\n  }\r\n\r\n  /**\r\n   * @returns {Readable}\r\n   */\r\n  _updateStream () {\r\n    this._stream = new Readable({\r\n      read () {\r\n        //\r\n      }\r\n    });\r\n    return this._stream;\r\n  }\r\n\r\n  /**\r\n   * @param {Buffer} buffer\r\n   * @returns {void}\r\n   */\r\n  _pushStream (buffer) {\r\n    if (TERMINATOR_BUFFER_ARRAY.some((_buffer) => _buffer.equals(buffer))) {\r\n      this._endStream();\r\n      return;\r\n    }\r\n    const endBuffer = buffer.subarray(-5);\r\n    if (endBuffer.equals(TERMINATOR_BUFFER)) {\r\n      /** @type {Readable} */ (this._stream).push(buffer.subarray(0, -5));\r\n      this._endStream();\r\n      return;\r\n    }\r\n    /** @type {Readable} */ (this._stream).push(buffer);\r\n  }\r\n\r\n  /**\r\n   * @param {Error} [err]\r\n   * @returns {void}\r\n   */\r\n  _endStream (err) {\r\n    if (this._stream) {\r\n      this._stream.push(null);\r\n    }\r\n    this._stream = null;\r\n    this.emit('end', err);\r\n  }\r\n\r\n  /**\r\n   * @returns {Promise<void>}\r\n   */\r\n  connect () {\r\n    const {host, port, tlsOptions, servername} = this;\r\n    const socket = new Socket();\r\n    socket.setKeepAlive(true);\r\n    // eslint-disable-next-line promise/avoid-new -- Our own API\r\n    return new Promise((\r\n      // eslint-disable-next-line jsdoc/reject-any-type -- Promise API\r\n      /** @type {(val?: any) => void} */\r\n      resolve,\r\n      reject\r\n    ) => {\r\n      let settled = false;\r\n\r\n      const safeResolve = () => {\r\n        if (settled) {\r\n          return;\r\n        }\r\n        settled = true;\r\n        resolve();\r\n      };\r\n\r\n      /**\r\n       * @param {Error & {\r\n       *   eventName: \"timeout\"|\"bad-server-response\"|\"close\"|\"end\"\r\n       * }} e\r\n       */\r\n      const safeReject = (e) => {\r\n        if (this.listeners('warn').length) {\r\n          this.emit('warn', e);\r\n        }\r\n        if (settled) {\r\n          return;\r\n        }\r\n        settled = true;\r\n        reject(e);\r\n      };\r\n\r\n      if (typeof this.timeout !== 'undefined') {\r\n        socket.setTimeout(this.timeout, () => {\r\n          const err = /** @type {Error & {eventName: \"timeout\"}} */ (\r\n            new Error('timeout')\r\n          );\r\n          err.eventName = 'timeout';\r\n          safeReject(err);\r\n          if (this.listeners('end').length) {\r\n            this.emit('end', err);\r\n          }\r\n          if (this._socket && !this._socket.destroyed) {\r\n            this._socket.end();\r\n          }\r\n          this._socket = null;\r\n\r\n          if (this._stream) {\r\n            this._stream.destroy();\r\n          }\r\n        });\r\n      }\r\n      if (this.tls) {\r\n        const options = {host, port, socket, servername, ...tlsOptions};\r\n        // @ts-expect-error Works\r\n        this._socket = _tls.connect(options);\r\n      } else {\r\n        this._socket = socket;\r\n      }\r\n\r\n      this._socket.on(\r\n        'data',\r\n        /**\r\n         * @param {Buffer} buffer\r\n         * @returns {void}\r\n         */\r\n        (buffer) => {\r\n          if (this._stream) {\r\n            this._pushStream(buffer);\r\n            return;\r\n          }\r\n          if (buffer[0] === 45) { // '-'\r\n            const err =\r\n              /**\r\n               * @type {Error & {eventName: \"error\", command: string|undefined}}\r\n               */ (\r\n                // @ts-expect-error It's ok\r\n                new Error(buffer.subarray(5, -2))\r\n              );\r\n            err.eventName = 'error';\r\n            // https://github.com/node-pop3/node-pop3/issues/37\r\n            err.command = this._command.startsWith('PASS ')\r\n              ? 'PASS ***'\r\n              : this._command;\r\n            this.emit('error', err);\r\n            return;\r\n          }\r\n          if (buffer[0] === 43) { // '+'\r\n            const firstLineEndIndex = buffer.indexOf(CRLF_BUFFER);\r\n            const infoBuffer = buffer.subarray(4, firstLineEndIndex);\r\n            const [commandName, msgNumber] = (this._command || '').split(' ');\r\n            let stream = null;\r\n            if (MULTI_LINE_COMMAND_NAME.includes(commandName) ||\r\n                (!msgNumber &&\r\n                MAYBE_MULTI_LINE_COMMAND_NAME.includes(commandName))) {\r\n              this._updateStream();\r\n              stream = this._stream;\r\n              const bodyBuffer = buffer.subarray(firstLineEndIndex + 2);\r\n              if (bodyBuffer[0]) {\r\n                this._pushStream(bodyBuffer);\r\n              }\r\n            }\r\n            this.emit('response', infoBuffer.toString(), stream);\r\n            safeResolve();\r\n            return;\r\n          }\r\n          const err =\r\n            /**\r\n             * @type {Error & {eventName: \"bad-server-response\"}}\r\n             */ (\r\n              new Error('Unexpected response')\r\n            );\r\n          err.eventName = 'bad-server-response';\r\n          safeReject(err);\r\n        }\r\n      );\r\n      this._socket.on('error', (err) => {\r\n        err.eventName = 'error';\r\n        if (this._stream) {\r\n          this.emit('error', err);\r\n          return;\r\n        }\r\n        safeReject(err);\r\n        this._socket = null;\r\n      });\r\n      this._socket.once('close', () => {\r\n        const err = /** @type {Error & {eventName: \"close\"}} */ (\r\n          new Error('close')\r\n        );\r\n        err.eventName = 'close';\r\n        safeReject(err);\r\n        this._socket = null;\r\n      });\r\n      this._socket.once('end', () => {\r\n        const err = /** @type {Error & {eventName: \"end\"}} */ (\r\n          new Error('end')\r\n        );\r\n        err.eventName = 'end';\r\n        safeReject(err);\r\n        this._socket = null;\r\n      });\r\n      socket.connect({\r\n        host,\r\n        port\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * @param {...(string|Integer)} args\r\n   * @throws {Error}\r\n   * @returns {Promise<[string, Readable]>}\r\n   */\r\n  async command (...args) {\r\n    this._command = args.join(' ').trim();\r\n    if (!this._socket) {\r\n      throw new Error('no-socket');\r\n    }\r\n    // eslint-disable-next-line promise/avoid-new -- Our own API\r\n    await new Promise((\r\n      // eslint-disable-next-line jsdoc/reject-any-type -- Promise API\r\n      /** @type {(value?: any) => void} */\r\n      resolve,\r\n      reject\r\n    ) => {\r\n      if (!this._stream) {\r\n        resolve();\r\n        return;\r\n      }\r\n      this.once('error', (err) => {\r\n        reject(err);\r\n      });\r\n      this.once('end', (err) => {\r\n        return err ? reject(err) : resolve();\r\n      });\r\n    });\r\n\r\n    // eslint-disable-next-line promise/avoid-new -- Our own API\r\n    return new Promise((resolve, reject) => {\r\n      /**\r\n       * @param {Error} err\r\n       */\r\n      const rejectFn = (err) => reject(err);\r\n      this.once('error', rejectFn);\r\n      this.once('response', (info, stream) => {\r\n        this.removeListener('error', rejectFn);\r\n        resolve([info, stream]);\r\n      });\r\n      if (!this._socket) {\r\n        reject(new Error('no-socket'));\r\n      }\r\n      /** @type {Socket} */ (\r\n        this._socket\r\n      ).write(`${this._command}${CRLF}`, 'utf8');\r\n    });\r\n  }\r\n}\r\n\r\nexport default Pop3Connection;\r\n"],"mappings":"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","ignoreList":[]}